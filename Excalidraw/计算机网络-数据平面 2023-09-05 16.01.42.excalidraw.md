---

excalidraw-plugin: parsed
tags: [excalidraw]

---
==⚠  Switch to EXCALIDRAW VIEW in the MORE OPTIONS menu of this document. ⚠==


# Text Elements
10.0.0.1 ^72opvjAc

10.0.0.2 ^jA4Jlpk0

10.0.0.3 ^mCb0Prqu

假设10.0.0.1向128.119.40.186:80发送请求，步骤如下
1. 主机10.0.0.1指派源端口3345并发送数据报到LAN中，
2. NAT路由器接收到数据报，生成一个新的端口号5501（可以任意一个不在NAT
表中的端口号），并将源IP地址和端口替换为WAN中的IP地址138.76.29.7:5501，并在
NAT转化表中增加一个表项。
3.  128.119.40.186发送响应报文给138.76.29.7：5501。
4. NAT将IP和端口通过检索NAT路由表进行转化为内部的主机并转发分组。 ^X5xOjVQC

%%
# Drawing
```json
{
	"type": "excalidraw",
	"version": 2,
	"source": "https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/1.9.14",
	"elements": [
		{
			"id": "1MqB8BQrASZlHzG6HfGYb",
			"type": "ellipse",
			"x": -285.6000671386719,
			"y": -266.2374801635742,
			"width": 108.79998779296875,
			"height": 102.39999389648438,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 1242988560,
			"version": 210,
			"versionNonce": 359963376,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false
		},
		{
			"id": "5TETLMJeccefXQ0NOBi-c",
			"type": "line",
			"x": -270.4000549316406,
			"y": -250.23748016357422,
			"width": 75.20001220703125,
			"height": 72,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 1755138288,
			"version": 214,
			"versionNonce": 501926928,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					75.20001220703125,
					72
				]
			],
			"lastCommittedPoint": [
				75.20001220703125,
				72
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "5SHMHO2ggLgndQ1MP2pxd",
			"type": "line",
			"x": -197.60000610351562,
			"y": -253.43749237060547,
			"width": 69.60003662109375,
			"height": 78.39999389648438,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 1902902800,
			"version": 226,
			"versionNonce": 604224752,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					-69.60003662109375,
					78.39999389648438
				]
			],
			"lastCommittedPoint": [
				-73.60003662109375,
				79.19998168945312
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "TmLgRJMCEoPgi1Oo5Oixy",
			"type": "ellipse",
			"x": -544.0000915527344,
			"y": -261.43749237060547,
			"width": 108.79998779296875,
			"height": 102.39999389648438,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 255660560,
			"version": 241,
			"versionNonce": 1557580304,
			"isDeleted": false,
			"boundElements": [],
			"updated": 1693901588163,
			"link": null,
			"locked": false
		},
		{
			"id": "VbvjA3qeIr2uLqE0ZKJbp",
			"type": "line",
			"x": -528.8000793457031,
			"y": -245.43749237060547,
			"width": 75.20001220703125,
			"height": 72,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 292308496,
			"version": 245,
			"versionNonce": 408854256,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					75.20001220703125,
					72
				]
			],
			"lastCommittedPoint": [
				75.20001220703125,
				72
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "wDQUHHfAF8RhNPjsfmx9w",
			"type": "line",
			"x": -456.0000305175781,
			"y": -248.63750457763672,
			"width": 69.60003662109375,
			"height": 78.39999389648438,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 850434064,
			"version": 257,
			"versionNonce": 429066256,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					-69.60003662109375,
					78.39999389648438
				]
			],
			"lastCommittedPoint": [
				-73.60003662109375,
				79.19998168945312
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "0mTU6QFnYFCtEdScXxwrg",
			"type": "rectangle",
			"x": 193.5,
			"y": -372.6374969482422,
			"width": 105,
			"height": 92,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 3
			},
			"seed": 284158704,
			"version": 157,
			"versionNonce": 1124942064,
			"isDeleted": false,
			"boundElements": [
				{
					"type": "text",
					"id": "72opvjAc"
				}
			],
			"updated": 1693901588163,
			"link": null,
			"locked": false
		},
		{
			"id": "72opvjAc",
			"type": "text",
			"x": 218.5760269165039,
			"y": -336.6374969482422,
			"width": 54.84794616699219,
			"height": 20,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "solid",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": null,
			"seed": 1259527696,
			"version": 129,
			"versionNonce": 806848016,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"text": "10.0.0.1",
			"rawText": "10.0.0.1",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"verticalAlign": "middle",
			"baseline": 14,
			"containerId": "0mTU6QFnYFCtEdScXxwrg",
			"originalText": "10.0.0.1",
			"lineHeight": 1.25
		},
		{
			"id": "hIs6nJBuSPun67-9-d_id",
			"type": "rectangle",
			"x": 186.2999267578125,
			"y": -224.6374969482422,
			"width": 105,
			"height": 92,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 3
			},
			"seed": 1294379248,
			"version": 185,
			"versionNonce": 597140208,
			"isDeleted": false,
			"boundElements": [
				{
					"type": "text",
					"id": "jA4Jlpk0"
				}
			],
			"updated": 1693901588163,
			"link": null,
			"locked": false
		},
		{
			"id": "jA4Jlpk0",
			"type": "text",
			"x": 207.84795379638672,
			"y": -188.6374969482422,
			"width": 61.90394592285156,
			"height": 20,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "solid",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": null,
			"seed": 535090928,
			"version": 129,
			"versionNonce": 1029456912,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"text": "10.0.0.2",
			"rawText": "10.0.0.2",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"verticalAlign": "middle",
			"baseline": 14,
			"containerId": "hIs6nJBuSPun67-9-d_id",
			"originalText": "10.0.0.2",
			"lineHeight": 1.25
		},
		{
			"id": "mY-Mbgqwm9b85csY_LTHD",
			"type": "rectangle",
			"x": 198.2999267578125,
			"y": -64.63749694824219,
			"width": 105,
			"height": 92,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 3
			},
			"seed": 193775344,
			"version": 214,
			"versionNonce": 142984432,
			"isDeleted": false,
			"boundElements": [
				{
					"type": "text",
					"id": "mCb0Prqu"
				}
			],
			"updated": 1693901588163,
			"link": null,
			"locked": false
		},
		{
			"id": "mCb0Prqu",
			"type": "text",
			"x": 220.09595489501953,
			"y": -28.637496948242188,
			"width": 61.40794372558594,
			"height": 20,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "solid",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": null,
			"seed": 2144666640,
			"version": 129,
			"versionNonce": 2136556048,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"text": "10.0.0.3",
			"rawText": "10.0.0.3",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"verticalAlign": "middle",
			"baseline": 14,
			"containerId": "mY-Mbgqwm9b85csY_LTHD",
			"originalText": "10.0.0.3",
			"lineHeight": 1.25
		},
		{
			"id": "cZYqnN-aeLXqSooZL3BRI",
			"type": "ellipse",
			"x": 31.20001220703125,
			"y": -390.2375259399414,
			"width": 91.20001220703125,
			"height": 420.8000030517578,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "solid",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 220276464,
			"version": 255,
			"versionNonce": 794797808,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false
		},
		{
			"id": "I-390Zi2yGWG-UQG6oywW",
			"type": "line",
			"x": -436.0000305175781,
			"y": -204.63750457763672,
			"width": 148.80007934570312,
			"height": 4.79998779296875,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 1839601680,
			"version": 170,
			"versionNonce": 889618448,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					148.80007934570312,
					-4.79998779296875
				]
			],
			"lastCommittedPoint": [
				152.00003051757812,
				-4.79998779296875
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "CTjOdVmZO94hj9aldr3bk",
			"type": "line",
			"x": -176.00003051757812,
			"y": -214.23748016357422,
			"width": 360.8000793457031,
			"height": 31.20001220703125,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 76764912,
			"version": 272,
			"versionNonce": 1689078000,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					360.8000793457031,
					31.20001220703125
				]
			],
			"lastCommittedPoint": [
				152.00003051757812,
				-4.79998779296875
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "j_9hyR7EidSn2bggVk2He",
			"type": "line",
			"x": 196,
			"y": -324.63748931884766,
			"width": 105.5999755859375,
			"height": 25.599990844726562,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "solid",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 1747577872,
			"version": 155,
			"versionNonce": 2119958032,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					-105.5999755859375,
					25.599990844726562
				]
			],
			"lastCommittedPoint": [
				-105.5999755859375,
				25.599990844726562
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "9Vxv4uw7z0ZuQ4I5yUdrU",
			"type": "line",
			"x": 196,
			"y": -23.03748321533203,
			"width": 117.60003662109375,
			"height": 66.39997863769531,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "#1e1e1e",
			"fillStyle": "solid",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 2
			},
			"seed": 363958800,
			"version": 216,
			"versionNonce": 603368176,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901588163,
			"link": null,
			"locked": false,
			"points": [
				[
					0,
					0
				],
				[
					-117.60003662109375,
					-66.39997863769531
				]
			],
			"lastCommittedPoint": [
				-105.5999755859375,
				25.599990844726562
			],
			"startBinding": null,
			"endBinding": null,
			"startArrowhead": null,
			"endArrowhead": null
		},
		{
			"id": "ZooeT578zCzBSd9dWVLcF",
			"type": "rectangle",
			"x": -372.0999755859375,
			"y": 90.36254119873047,
			"width": 676,
			"height": 362,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": {
				"type": 3
			},
			"seed": 621759216,
			"version": 171,
			"versionNonce": 134021648,
			"isDeleted": false,
			"boundElements": [
				{
					"type": "text",
					"id": "X5xOjVQC"
				}
			],
			"updated": 1693901590439,
			"link": null,
			"locked": false
		},
		{
			"id": "X5xOjVQC",
			"type": "text",
			"x": -341.86785888671875,
			"y": 201.36254119873047,
			"width": 615.5357666015625,
			"height": 140,
			"angle": 0,
			"strokeColor": "#1e1e1e",
			"backgroundColor": "transparent",
			"fillStyle": "hachure",
			"strokeWidth": 0.5,
			"strokeStyle": "solid",
			"roughness": 0,
			"opacity": 100,
			"groupIds": [],
			"frameId": null,
			"roundness": null,
			"seed": 1743348752,
			"version": 981,
			"versionNonce": 1138222832,
			"isDeleted": false,
			"boundElements": null,
			"updated": 1693901590439,
			"link": null,
			"locked": false,
			"text": "假设10.0.0.1向128.119.40.186:80发送请求，步骤如下\n1. 主机10.0.0.1指派源端口3345并发送数据报到LAN中，\n2. NAT路由器接收到数据报，生成一个新的端口号5501（可以任意一个不在NAT\n表中的端口号），并将源IP地址和端口替换为WAN中的IP地址138.76.29.7:5501，并在\nNAT转化表中增加一个表项。\n3.  128.119.40.186发送响应报文给138.76.29.7：5501。\n4. NAT将IP和端口通过检索NAT路由表进行转化为内部的主机并转发分组。",
			"rawText": "假设10.0.0.1向128.119.40.186:80发送请求，步骤如下\n1. 主机10.0.0.1指派源端口3345并发送数据报到LAN中，\n2. NAT路由器接收到数据报，生成一个新的端口号5501（可以任意一个不在NAT\n表中的端口号），并将源IP地址和端口替换为WAN中的IP地址138.76.29.7:5501，并在\nNAT转化表中增加一个表项。\n3.  128.119.40.186发送响应报文给138.76.29.7：5501。\n4. NAT将IP和端口通过检索NAT路由表进行转化为内部的主机并转发分组。",
			"fontSize": 16,
			"fontFamily": 1,
			"textAlign": "center",
			"verticalAlign": "middle",
			"baseline": 134,
			"containerId": "ZooeT578zCzBSd9dWVLcF",
			"originalText": "假设10.0.0.1向128.119.40.186:80发送请求，步骤如下\n1. 主机10.0.0.1指派源端口3345并发送数据报到LAN中，\n2. NAT路由器接收到数据报，生成一个新的端口号5501（可以任意一个不在NAT\n表中的端口号），并将源IP地址和端口替换为WAN中的IP地址138.76.29.7:5501，并在\nNAT转化表中增加一个表项。\n3.  128.119.40.186发送响应报文给138.76.29.7：5501。\n4. NAT将IP和端口通过检索NAT路由表进行转化为内部的主机并转发分组。",
			"lineHeight": 1.25
		}
	],
	"appState": {
		"theme": "light",
		"viewBackgroundColor": "#ffffff",
		"currentItemStrokeColor": "#1e1e1e",
		"currentItemBackgroundColor": "transparent",
		"currentItemFillStyle": "hachure",
		"currentItemStrokeWidth": 0.5,
		"currentItemStrokeStyle": "solid",
		"currentItemRoughness": 0,
		"currentItemOpacity": 100,
		"currentItemFontFamily": 1,
		"currentItemFontSize": 16,
		"currentItemTextAlign": "center",
		"currentItemStartArrowhead": null,
		"currentItemEndArrowhead": "arrow",
		"scrollX": 767,
		"scrollY": 368.9624938964844,
		"zoom": {
			"value": 1
		},
		"currentItemRoundness": "round",
		"gridSize": null,
		"currentStrokeOptions": null,
		"previousGridSize": null,
		"frameRendering": {
			"enabled": true,
			"clip": true,
			"name": true,
			"outline": true
		}
	},
	"files": {}
}
```
%%