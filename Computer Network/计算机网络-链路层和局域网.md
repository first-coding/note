链路层提供服务：
	1.成帧：网络层经过链路传送之前，大部分链路协议都要链路帧封装。一个帧相当于若干个首部和网络层数据。
	2.链路接入：MAC协议，规定帧在链路上传输的规则。
	3.可靠交付：保证无差错地经链路层移动每个网络层数据报。
	4.差错检测：因为信号衰减和电磁噪音等原因为导致链路传输的时候出现错误，这时候链路没有必要转发错误数据报。
	5.差错纠正：部分链路层协议可以准确定位帧差错出现的地方。
- 差错检测
	- 奇偶校验
		- 加上一个校验比特
		- 接收方计算全部比特中1的总数，如果是采用偶校验，1的总数为奇数的话就出现差错，奇校验就和偶校验一样，只是1的总数为偶数就出现了差错。
		- 因为奇偶校验可能存在着未检测的差错，例如：采用偶校验，但是1的总数也是偶数，但是有两个或者偶数个差错的话会存在检测不出来，这样会导致接收方接收到错误的比特，所以
		- 二维奇偶校验可以检测差错，也可以纠正错误。
	- 检验和方法
		- 将传输数据划分为固定大小的块（例如，每块由8位二进制数据组成）
		- 将每一块二进制数据进行求和运算，得到和值
		- 将和值转换为固定长度的校验值，通常为8位或者16位
		- 将校验值和数据一起传输
		-接收方
		- 接收方将数据块中的二进制数据进行求和运算，得到和值
		- 将和值与接收到的校验值进行比较，相同的话没有错误，反之有错。
	- 循环冗余检测（CRC） ^6e1a4d
		- 广泛使用
		- ![[Pasted image 20230619101837.png]]
		- 循环冗余检测无法进行纠正比特，只能够进行差错的检验。
		- 生成多项式8，12，16，32比特有国际标准
- 网络链路分类及协议
	- 点对点链路：即是单个发送方和另一端的单个接收方组成
		- 点对点协议（PPP）
		- 高级数据链路控制（HDLC）
	- 广播链路：即是每一台主机都i有可能是广播发送方或者接收方
		- 多路访问协议：节点通过这些协议来规范共享的广播信道上的传输行为
		- 碰撞：因为每个结点都可以传输和接收数据，两个结点同时发送数据的话，在这个网络内的所有节点都可以接收，这样的话两个数据会发生碰撞导致丢失。
		- 信道划分协议：
			- 时分多路复用：将时间划分为一个一个时间帧，每个结点都有相同的时间，传输速率为R/Nbps（R为传输速率，N为节点个数），但存在缺点，第一：节点被限制了R/Nbps的平均速率，第二：节点必须进行等待属于自己的时间，即使就算是即使它是唯一一个有帧发送的节点。
			- 频分多路复用：将R bps信道划分为不同频段，每个频段具有R/N带宽（理论带宽：网络可通过的最高数据率，即每秒最大的传输多少比特。实际带宽：实际可用的数据传输速率。它可能受到多种因素的影响，如网络拥塞、信号干扰、设备性能等。实际带宽往往低于理论带宽，因为在实际网络中存在许多不可控的因素。信道：指在通信系统中用于传输信号的特定通路或介质。）并把每个频率分配给N个节点中的一个。
			- 码分多址：给每个节点分配一种不同的编码，然后每个节点用它唯一的编码来对它发送数据进行编码。
		- 随机接入协议：传输节点以信道的全部速率进行发送，当出现碰撞的时候，等待随机时延再重发。每个碰撞节点可以独立的选择随机时延。 ^922d6d
			- ALOHA协议：就是无论碰不碰撞都传输自己的比特，出现碰撞后就以一定概率重传。类似七嘴八舌
			- 载波侦听多路访问协议（CSMA/CD）：先听，空闲了在传输。但是如果t0时刻一个节点发送的比特还没到另一个发送节点上的话，那么另一个节点会认为信道空闲，就会传输自己的比特。如果出现碰撞的话就放弃两个出现碰撞的比特（因为这时候没有办法保证碰撞后的比特没有受到影响） ^8b5616
		- 轮流协议：
			- 轮询协议：主节点会向每个非主节点发送报文，告诉能够传输的帧的最多数量，等一个非主节点完了之后在向另一个非主节点发送相同的报文。
			- 令牌传递协议：当有比特需要发送的时候，就会获得令牌，有令牌的节点才能发送自己的比特。一个节点发送完之后立即向下一个节点转发令牌。
- 链路层寻址和ARP：
	- Tips：主机和路由器具有网络层地址同时也具有链路层地址（是它们的适配器，网络接口有链路层地址）
	- MAC地址是唯一的，由IEEE管理着MAC地址空间。
	- 源适配器向目的适配器发送一个帧，在帧上插入目的适配器的一个MAC地址，并发送到局域网内。交换机将接收的帧广播到连接的每个接口，每个接口接收该帧并将帧上的MAC地址和自身的MAC地址匹配，如果匹配则向上传递数据报，如果不匹配则丢弃该帧。
	- 地址解析协议（ARP）：IP地址和MAC地址转换的协议（只为同一个子网内的主机和路由器接口解析IP地址）
		- ![[Pasted image 20230624102837.png]]
		- 物理层设备：集线器，将一个接收到的比特，重新生成然后广播到与它连接的每一个接口上去。通过对比MAC地址可以知道是否是发给自己的。
		- 链路层设备：交换机，可以进行特定的发送。通过交换机表实现，一开始是没有任何信息。通过不断发送，广播完善，执行转发和过滤。通过交换机表进行特定接口的发送。表中没有的话就进行广播，目的的主机会向交换机发送接收到的消息，交换机表就把对应的mac地址和接口写入交换机表中。有的话直接查表转发。
		- 交换机是即插即用，路由器需要人为加上自动分配，但是交换机会存在广播风暴（就是不断广播（有节点存在问题的时候）），路由器工作在网络层上，IP首部用一个字段限制这个循环。